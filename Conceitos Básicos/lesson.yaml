
- Class: meta
  Course: Monitoria PNB
  Lesson: Teste de Conhecimentos Gerais
  Author: Joelson Lima
  Type: Standard
  Organization: JDSL
  Version: 1.0.0

- Class: text
  Output: |
    Olá querid@. Seja bem-vindo ao meu pequeno teste de conhecimentos gerais
    para introduzi-lo à linguagem de programação R. Divirta-se.

- Class: text
  Output: |
    Não se preocupe, por ser sua primeira vez por aqui (e a minha também
    criando uma atividade rsrs) não veremos nada de muito complicado.

- Class: text
  Output: |
    Vamos fazer uns cálculos simples, tu vai ver.

- Class: cmd_question
  Output: |
    Você foi até a fila do RU com seus best friends. Vocês querem comprar
    fichas para uma semana inteira de RU, almoço e janta. Quanto vocês
    devem desembolsar para efetuar esta compra?
  CorrectAnswer: 32.5
  AnswerTests: omnitest(correctVal=32.5)
  Hint: |
    Tente calcular o valor de cada ficha e multiplicar pela quantidade de dias.

# Carregar pacotes necessários
if (!requireNamespace("mailR", quietly = TRUE)) {
  install.packages("mailR", dependencies = TRUE)
}
library(swirl)
library(mailR)

# Função para enviar resultados por e-mail
enviar_resultados <- function() {
  progresso <- swirl::get_state()
  
  if (!is.null(progresso)) {
    send.mail(
      from = "seuemail@gmail.com",  # Substitua pelo seu e-mail
      to = "destinatario@email.com",  # Substitua pelo destinatário
      subject = "Resultados do Teste Swirl",
      body = paste("Aqui estão os resultados do teste:\n", progresso),
      smtp = list(
        host.name = "smtp.gmail.com", 
        port = 465, 
        user.name = "seuemail@gmail.com",  # Substitua pelo seu e-mail
        passwd = "sua_senha",  # Substitua pela sua senha
        ssl = TRUE
      ),
      authenticate = TRUE,
      send = TRUE
    )
    message("Resultados enviados com sucesso!")
  } else {
    message("Nenhum progresso encontrado para enviar.")
  }
}

# Exibir mensagem no início da lição
message("Bem-vindo ao teste! No final, você poderá enviar seus resultados por e-mail.")

# Adicionar um prompt para enviar os resultados ao final da lição
swirl_options(swirl_on_exit = function() {
  message("Parabéns por concluir a lição! Para enviar seus resultados, digite:")
  message("`enviar_resultados()`")
})
